# è‚¡ç¥¨å€æŠ•ç­–ç•¥æ¨¡æ‹Ÿå™¨ ğŸ“ˆ

ä¸€ä¸ªåŸºäºçœŸå®è‚¡ç¥¨æ•°æ®çš„å€æŠ•ç­–ç•¥å›æµ‹ç³»ç»Ÿï¼Œä½¿ç”¨ Flask + baostock æ„å»ºï¼Œæä¾›ç›´è§‚çš„å¯è§†åŒ–ç•Œé¢å’Œå¤šç§å€æŠ•ç­–ç•¥é€‰æ‹©ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.8+-green.svg)
![Flask](https://img.shields.io/badge/flask-3.0.0-orange.svg)

---

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨è¯´æ˜](#ä½¿ç”¨è¯´æ˜)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æ›´æ–°æ—¥å¿—](#æ›´æ–°æ—¥å¿—)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ” **çœŸå®æ•°æ®è·å–** - é€šè¿‡ baostock è·å– A è‚¡å†å²äº¤æ˜“æ•°æ®
- ğŸ“Š **å¤šç§å€æŠ•ç­–ç•¥** - æ”¯æŒå¼€ç›˜ä»·ã€æ”¶ç›˜ä»·ã€æœ€é«˜ä»·ã€æœ€ä½ä»·ã€å‡ä»·äº”ç§ç­–ç•¥
- ğŸ“ˆ **å®æ—¶å¯è§†åŒ–** - åŠ¨æ€å›¾è¡¨å±•ç¤ºèµ„äº§å˜åŒ–å’Œè‚¡ç¥¨å¸‚å€¼
- ğŸ’° **è¯¦ç»†ç»Ÿè®¡** - å®æ—¶æ˜¾ç¤ºæŒä»“ã€èµ„é‡‘ã€ç›ˆäºç­‰å…³é”®æŒ‡æ ‡
- âš¡ **å¯è°ƒé€Ÿåº¦** - è‡ªå®šä¹‰æ¨¡æ‹Ÿé—´éš”ï¼Œå¿«é€Ÿå›æµ‹å†å²æ•°æ®

### ç•Œé¢ç‰¹æ€§
- ğŸ¨ **ç°ä»£åŒ–è®¾è®¡** - æ·±è‰²ä¸»é¢˜ï¼Œæ¸å˜è‰²å½©ï¼Œæµç•…åŠ¨ç”»
- ğŸ“± **å“åº”å¼å¸ƒå±€** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸
- ğŸ”” **å‹å¥½æç¤º** - Toast é€šçŸ¥ç³»ç»Ÿï¼Œæ›¿ä»£ä¼ ç»Ÿ alert
- ğŸ“‹ **æ•°æ®è¡¨æ ¼** - å¯æ»šåŠ¨çš„è‚¡ç¥¨æ•°æ®å±•ç¤ºï¼Œç²˜æ€§è¡¨å¤´
- ğŸ¯ **é˜²æŠ–è®¾è®¡** - é˜²æ­¢é¢‘ç¹ç‚¹å‡»ï¼Œä¿æŠ¤æœåŠ¡å™¨èµ„æº

---

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯
- **Flask** - Python Web æ¡†æ¶
- **baostock** - è‚¡ç¥¨æ•°æ®è·å–åº“
- **pandas** - æ•°æ®å¤„ç†å’Œåˆ†æ

### å‰ç«¯
- **åŸç”Ÿ JavaScript** - æ— æ¡†æ¶ä¾èµ–
- **Chart.js** - å›¾è¡¨å¯è§†åŒ–
- **CSS3** - ç°ä»£åŒ–æ ·å¼å’ŒåŠ¨ç”»

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- pip åŒ…ç®¡ç†å™¨

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd å€æŠ•æ¨¡æ‹Ÿ
```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰**
```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

3. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

4. **å¯åŠ¨åº”ç”¨**
```bash
python app.py
```

5. **è®¿é—®åº”ç”¨**

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5001`

---

## ğŸ“– ä½¿ç”¨è¯´æ˜

### 1. è·å–è‚¡ç¥¨æ•°æ®

åœ¨å‚æ•°è®¾ç½®åŒºåŸŸå¡«å†™ï¼š
- **è‚¡ç¥¨ä»£ç **ï¼šä¾‹å¦‚ `sz.300750`ï¼ˆå®å¾·æ—¶ä»£ï¼‰ã€`sh.600519`ï¼ˆè´µå·èŒ…å°ï¼‰
- **å¼€å§‹æ—¥æœŸ**ï¼šæ ¼å¼ `YYYY-MM-DD`ï¼Œä¾‹å¦‚ `2024-01-01`
- **ç»“æŸæ—¥æœŸ**ï¼šæ ¼å¼ `YYYY-MM-DD`ï¼Œä¾‹å¦‚ `2024-06-01`

ç‚¹å‡» **"è·å–æ•°æ®"** æŒ‰é’®ï¼Œç³»ç»Ÿå°†ä» baostock è·å–å†å²æ•°æ®å¹¶æ˜¾ç¤ºåœ¨è¡¨æ ¼ä¸­ã€‚

### 2. é…ç½®å›æµ‹å‚æ•°

- **å€æŠ•ç­–ç•¥**ï¼šé€‰æ‹©åŸºäºå“ªä¸ªä»·æ ¼è¿›è¡Œå€æŠ•
  - å½“æ—¥æ”¶ç›˜ä»·å€æŠ•ï¼ˆé»˜è®¤ï¼‰
  - å½“æ—¥å¼€ç›˜ä»·å€æŠ•
  - å½“æ—¥æœ€é«˜ä»·å€æŠ•
  - å½“æ—¥æœ€ä½ä»·å€æŠ•
  - å½“æ—¥å‡ä»·å€æŠ•

- **æ€»èµ„é‡‘**ï¼šè®¾ç½®åˆå§‹æ€»èµ„é‡‘ï¼ˆå…ƒï¼‰
- **åˆå§‹è‚¡æ•°**ï¼šæ¯æ¬¡åŸºç¡€è´­ä¹°çš„è‚¡æ•°
- **æ¨¡æ‹Ÿé—´éš”**ï¼šå›æµ‹é€Ÿåº¦ï¼Œå•ä½æ¯«ç§’ï¼ˆé»˜è®¤ 100msï¼‰

### 3. å¼€å§‹å›æµ‹

ç‚¹å‡» **"å¼€å§‹å›æµ‹"** æŒ‰é’®ï¼Œç³»ç»Ÿå°†ï¼š
1. éªŒè¯æ€»èµ„é‡‘æ˜¯å¦è¶³å¤Ÿè´­ä¹°åˆå§‹è‚¡æ•°
2. æŒ‰ç…§é€‰å®šç­–ç•¥æ¨¡æ‹Ÿæ¯æ—¥äº¤æ˜“
3. å®æ—¶æ›´æ–°å›¾è¡¨å’Œç»Ÿè®¡æ•°æ®
4. æ˜¾ç¤ºæœ€ç»ˆç›ˆäºç»“æœ

### 4. æŸ¥çœ‹ç»“æœ

å›æµ‹å®Œæˆåï¼ŒæŸ¥çœ‹ï¼š
- **å›¾è¡¨**ï¼šæ€»èµ„äº§å’Œè‚¡ç¥¨å¸‚å€¼çš„å˜åŒ–è¶‹åŠ¿
- **ç»Ÿè®¡é¢æ¿**ï¼š
  - å½“å‰è‚¡ä»·
  - å½“å‰èµ„äº§å¸‚å€¼
  - å½“å‰å‰©ä½™èµ„é‡‘
  - æŒä»“è‚¡æ•°
  - æ€»èµ„äº§ï¼ˆå¸‚å€¼+ç°é‡‘ï¼‰
  - æœ€ç»ˆè‚¡ç¥¨ä»·å€¼ï¼ˆçº¢è‰²=ç›ˆåˆ©ï¼Œç»¿è‰²=äºæŸï¼‰

### 5. é‡ç½®

ç‚¹å‡» **"é‡ç½®"** æŒ‰é’®æ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼Œå¼€å§‹æ–°çš„å›æµ‹ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
å€æŠ•æ¨¡æ‹Ÿ/
â”œâ”€â”€ app.py                 # Flask åç«¯ä¸»ç¨‹åº
â”œâ”€â”€ baoStack.py           # baostock æ•°æ®è·å–æ¨¡å—
â”œâ”€â”€ double.html           # ä¸»é¡µé¢ HTML
â”œâ”€â”€ script.js             # å‰ç«¯é€»è¾‘
â”œâ”€â”€ style.css             # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ chart.js              # Chart.js åº“
â”œâ”€â”€ requirements.txt      # Python ä¾èµ–
â””â”€â”€ README.md            # é¡¹ç›®æ–‡æ¡£
```

### æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

#### `app.py`
Flask åº”ç”¨ä¸»æ–‡ä»¶ï¼Œæä¾›ï¼š
- é™æ€æ–‡ä»¶æœåŠ¡
- `/api/stock_data` API æ¥å£

#### `baoStack.py`
è‚¡ç¥¨æ•°æ®è·å–æ¨¡å—ï¼š
- `get(code, start_date, end_date)` - è·å–å†å² K çº¿æ•°æ®
- è¿”å› pandas DataFrame æ ¼å¼

#### `script.js`
å‰ç«¯æ ¸å¿ƒé€»è¾‘ï¼š
- æ•°æ®è·å–å’ŒéªŒè¯
- å€æŠ•ç­–ç•¥æ¨¡æ‹Ÿ
- å›¾è¡¨æ›´æ–°
- UI äº¤äº’

---

## ğŸŒ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒ

```bash
python app.py
```

è®¿é—® `http://localhost:5001`

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Gunicornï¼ˆæ¨èï¼‰

1. **å®‰è£… Gunicorn**
```bash
pip install gunicorn
```

2. **å¯åŠ¨æœåŠ¡**
```bash
gunicorn -w 4 -b 0.0.0.0:5001 --timeout 120 app:app
```

å‚æ•°è¯´æ˜ï¼š
- `-w 4`ï¼š4 ä¸ªå·¥ä½œè¿›ç¨‹
- `-b 0.0.0.0:5001`ï¼šç»‘å®šåˆ°æ‰€æœ‰ç½‘ç»œæ¥å£çš„ 5001 ç«¯å£
- `--timeout 120`ï¼šè¯·æ±‚è¶…æ—¶ 120 ç§’

3. **ä½¿ç”¨ Systemd ç®¡ç†ï¼ˆLinuxï¼‰**

åˆ›å»º `/etc/systemd/system/stock-simulator.service`ï¼š

```ini
[Unit]
Description=Stock Doubling Simulator
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/path/to/your/project
Environment="PATH=/path/to/your/project/venv/bin"
ExecStart=/path/to/your/project/venv/bin/gunicorn -w 4 -b 0.0.0.0:5001 --timeout 120 app:app
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl start stock-simulator
sudo systemctl enable stock-simulator
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨ Docker

1. **åˆ›å»º Dockerfile**

```dockerfile
FROM python:3.10-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 5001

CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5001", "--timeout", "120", "app:app"]
```

2. **æ„å»ºå’Œè¿è¡Œ**

```bash
docker build -t stock-simulator .
docker run -d -p 5001:5001 --name stock-simulator stock-simulator
```

#### æ–¹å¼ä¸‰ï¼šNginx åå‘ä»£ç†

1. **å®‰è£… Nginx**
```bash
sudo apt install nginx  # Ubuntu/Debian
```

2. **é…ç½® Nginx**

åˆ›å»º `/etc/nginx/sites-available/stock-simulator`ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:5001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_connect_timeout 120s;
        proxy_send_timeout 120s;
        proxy_read_timeout 120s;
    }

    location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg)$ {
        proxy_pass http://127.0.0.1:5001;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}
```

3. **å¯ç”¨é…ç½®**
```bash
sudo ln -s /etc/nginx/sites-available/stock-simulator /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

#### HTTPS é…ç½®ï¼ˆæ¨èï¼‰

ä½¿ç”¨ Let's Encrypt å…è´¹ SSL è¯ä¹¦ï¼š

```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### å®‰å…¨å»ºè®®

1. **é˜²ç«å¢™é…ç½®**
```bash
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

2. **é™åˆ¶è®¿é—®é€Ÿç‡**

åœ¨ Nginx é…ç½®ä¸­æ·»åŠ ï¼š
```nginx
limit_req_zone $binary_remote_addr zone=api_limit:10m rate=10r/s;

location /api/ {
    limit_req zone=api_limit burst=20 nodelay;
    proxy_pass http://127.0.0.1:5001;
}
```

3. **ç¯å¢ƒå˜é‡**

åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
FLASK_ENV=production
SECRET_KEY=your-secret-key-here
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: æ— æ³•è·å–è‚¡ç¥¨æ•°æ®

**åŸå› **ï¼š
- è‚¡ç¥¨ä»£ç æ ¼å¼é”™è¯¯
- æ—¥æœŸæ ¼å¼ä¸æ­£ç¡®
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿è‚¡ç¥¨ä»£ç æ ¼å¼æ­£ç¡®ï¼ˆå¦‚ `sz.300750`ã€`sh.600519`ï¼‰
- æ—¥æœŸæ ¼å¼å¿…é¡»ä¸º `YYYY-MM-DD`
- æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

### Q2: æ€»èµ„é‡‘ä¸è¶³

**åŸå› **ï¼šåˆå§‹èµ„é‡‘å°äº `å½“å‰è‚¡ä»· Ã— åˆå§‹è‚¡æ•°`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¢åŠ æ€»èµ„é‡‘
- å‡å°‘åˆå§‹è‚¡æ•°
- é€‰æ‹©ä»·æ ¼æ›´ä½çš„è‚¡ç¥¨

### Q3: è¡¨æ ¼æ•°æ®æ˜¾ç¤ºå¼‚å¸¸

**åŸå› **ï¼šæ•°æ®è·å–å¤±è´¥æˆ–æ ¼å¼é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç‚¹å‡»"è·å–æ•°æ®"é‡æ–°è·å–
- æ£€æŸ¥æ—¥æœŸèŒƒå›´æ˜¯å¦åŒ…å«äº¤æ˜“æ—¥
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### Q4: éƒ¨ç½²åæ— æ³•è®¿é—®

**åŸå› **ï¼š
- ç«¯å£è¢«å ç”¨
- é˜²ç«å¢™é˜»æ­¢
- æœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo lsof -i :5001

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status stock-simulator

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u stock-simulator -f
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-03)

#### æ–°å¢åŠŸèƒ½
- âœ… çœŸå®è‚¡ç¥¨æ•°æ®è·å–ï¼ˆbaostockï¼‰
- âœ… äº”ç§å€æŠ•ç­–ç•¥æ”¯æŒ
- âœ… å®æ—¶å›¾è¡¨å¯è§†åŒ–
- âœ… Toast é€šçŸ¥ç³»ç»Ÿ
- âœ… æ•°æ®è¡¨æ ¼å±•ç¤º
- âœ… å¯è°ƒæ¨¡æ‹Ÿé€Ÿåº¦
- âœ… é˜²æŠ–æœºåˆ¶
- âœ… ç›ˆäºé¢œè‰²æ ‡è¯†

#### ç•Œé¢ä¼˜åŒ–
- âœ… ç°ä»£åŒ–æ·±è‰²ä¸»é¢˜
- âœ… å“åº”å¼å¸ƒå±€
- âœ… ç´§å‡‘å‹æ§åˆ¶é¢æ¿
- âœ… ç²˜æ€§è¡¨å¤´
- âœ… å¹³æ»‘åŠ¨ç”»æ•ˆæœ

#### æŠ€æœ¯æ”¹è¿›
- âœ… è¾“å…¥éªŒè¯
- âœ… é”™è¯¯å¤„ç†
- âœ… æ—¥æœŸæ ¼å¼éªŒè¯
- âœ… è¡¨æ ¼æ»šåŠ¨é‡ç½®
- âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ”¯æŒ

---

## ğŸ”§ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

1. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
python app.py
```

2. **ä¿®æ”¹ä»£ç **
- åç«¯ï¼šä¿®æ”¹ `app.py` æˆ– `baoStack.py`
- å‰ç«¯ï¼šä¿®æ”¹ `script.js`ã€`style.css` æˆ– `double.html`

3. **è°ƒè¯•**
- åç«¯ï¼šæŸ¥çœ‹ç»ˆç«¯è¾“å‡º
- å‰ç«¯ï¼šä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰

### è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- [baostock](http://baostock.com/) - æä¾›å…è´¹çš„è‚¡ç¥¨æ•°æ®æ¥å£
- [Flask](https://flask.palletsprojects.com/) - ä¼˜ç§€çš„ Python Web æ¡†æ¶
- [Chart.js](https://www.chartjs.org/) - å¼ºå¤§çš„å›¾è¡¨åº“

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶è‡³ï¼šyour-email@example.com

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**
